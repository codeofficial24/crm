{% extends "base.html" %}

{% block content %}
<style>
  .modal {
    display: none;
    position: fixed;
    z-index: 8;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgb(0, 0, 0);
    background-color: rgba(0, 0, 0, 0.4);
  }
  .modal-content {
    margin: 50px auto;
    border: 1px solid #999;
    width: 60%;
  }
  span {
    color: #666;
    display: block;
    padding: 0 0 5px;
  }
  form {
    padding: 25px;
    margin: 25px;
    box-shadow: 0 2px 5px #f5f5f5;
    background: #eee;
  }
  input,
  textarea {
    width: 90%;
    padding: 10px;
    margin-bottom: 20px;
    border: 1px solid #1c87c9;
    outline: none;
  }
  .contact-form button {
    width: 100%;
    padding: 10px;
    border: none;
    background: #1c87c9;
    font-size: 16px;
    font-weight: 400;
    color: #fff;
  }
  button:hover {
    background: #2371a0;
  }
  .close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
  }
  .close:hover,
  .close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
  }
  button.button {
    position: relative;
    top: 12px;
    background: none;
    padding: 0 0 3px 0;
    font-size: 16px;
    cursor: pointer;
  }
  button.button:hover {
    color: #a99567;
  }
</style>
<link href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" rel="stylesheet" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<section class="text-gray-700 body-font bgcolor" >
    <div class="container px-5 py-24 mx-auto flex flex-wrap">
        <div class="w-full mb-6 py-6 flex justify-between items-center border-b border-gray-200" >
            <div>
                <h1 style="color: #000000;font-weight: 600;font-size: 40px;line-height: 48px;">LEADS</h1>
            </div>
            <div>
              <button class="button" data-modal="modal"><img style="border-radius: 50%; width: 40px;height: 40px;" src='https://upload.wikimedia.org/wikipedia/commons/thumb/3/34/Microsoft_Office_Excel_%282019%E2%80%93present%29.svg/826px-Microsoft_Office_Excel_%282019%E2%80%93present%29.svg.png'></img></button>
              <div id="modal" class="modal">
                <div class="modal-content">
                  <div class="contact-form">
                    <span class="close">&times;</span>
                    <form method="post" enctype="multipart/form-data">
                      <h>Upload your Leads in .xlxs format</h1>
                      {% csrf_token %}
                      <input type="file" name="myfile" required>
                      <button type="submit">Upload</button>
                    </form>
                  </div>
                </div>
              </div>
                <a style="color: #8272F5;" href="{% url 'leads:lead-create' %}">
                  <i class="fas fa-plus"></i>
                  Create a new lead
                </a>
            </div>
        </div>
      <div class="flex flex-wrap -m-4">
        {% for lead in leads %}
        <div class="p-4 lg:w-1/2 md:w-full">
            <div class="flex border-2 rounded-lg border-gray-200 border-opacity-50 p-8 sm:flex-row flex-col"style="background: #8E7FFE;box-shadow: 0px 10px 30px rgba(54, 159, 255, 0.4);border-radius: 20px;width: 400px;height: 135px;">
                <div class="w-16 h-16 sm:mr-8 sm:mb-0 mb-4 inline-flex items-center justify-center rounded-full bg-indigo-100 text-indigo-500 flex-shrink-0">
                  <img src="https://thumbs.dreamstime.com/b/leads-icon-leads-139796780.jpg" style="border-radius: 50%;"></img>
                </div>
                <div class="flex-grow">
                  <h2 style="font-weight: 500;font-size: 28px;color: #FFFFFF;">
                      {{ lead.first_name }} {{ lead.last_name }}</h2>
                  <a class="mt-3 text-indigo-500 inline-flex items-center">
                    <a href="{% url 'leads:lead-detail' lead.pk %}" style="color: #FFFFFF;">View this lead  <i class="fa-solid fa-arrow-right"></i></a>
                  </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    </div>
    <script>
      let modalBtns = [...document.querySelectorAll(".button")];
      modalBtns.forEach(function (btn) {
        btn.onclick = function () {
          let modal = btn.getAttribute("data-modal");
          document.getElementById(modal).style.display = "block";
        };
      });
      let closeBtns = [...document.querySelectorAll(".close")];
      closeBtns.forEach(function (btn) {
        btn.onclick = function () {
          let modal = btn.closest(".modal");
          modal.style.display = "none";
        };
      });
      window.onclick = function (event) {
        if (event.target.className === "modal") {
          event.target.style.display = "none";
        }
      };
    </script>
</section>
        
        
{% endblock %}